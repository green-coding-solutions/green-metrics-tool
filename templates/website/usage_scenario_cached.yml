---
name: "Website Test (__GMT_VAR_PAGE__)"
author: Arne Tarara <arne@green-coding.io>
description: "Opens __GMT_VAR_PAGE__ from a cache and waits for full load + 5 seconds"

sci:
  R_d: Website load

compose-file: !include gmt-playwright-with-cache.yml

flow:
  - name: Warmup and Caching
    container: playwright-nodejs
    hidden: true
    commands:
      - type: playwright
        command: gmtPlaywrightCache("__GMT_VAR_PAGE__")

  - name: Load and idle
    container: playwright-nodejs
    commands:
      - type: playwright
        command: await page.goto("__GMT_VAR_PAGE__");
      - type: console
        command: sleep '__GMT_VAR_SLEEP__'

---
name: Test depends_on
author: David Kopp
description: test

services:
  test-container-1:
    image: alpine
    depends_on:
      - test-container-2
      - test-container-3
  test-container-2:
    image: alpine
    setup-commands:
      - command: sleep 1.5 # pause so the test-container-3 has time to fail
    depends_on:
      - test-container-3
  test-container-3:
    image: alpine
    entrypoint: sh -c "sleep 1.5 && exit 1" # simulate a container stop that happens after the detached container start check (waits for only 1 second)

flow:
  - name: Stress
    container: test-container-1
    commands:
      - type: console
        command: stress-ng -c 1 -t 1 -q
        note: Starting Stress
